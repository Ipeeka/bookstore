<div class="forgot-password-form">
  <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
    <div *ngIf="!otpSent" class="form-field">
      <p-floatLabel class="w-100">
        <input pInputText id="email" formControlName="email" placeholder="Enter your email" class="form-control" />
        <label for="email">Email</label>
      </p-floatLabel>
    </div>

    <div *ngIf="otpSent && !otpVerified" class="otp-input-container">
      <form [formGroup]="otpForm">
        <div class="card flex justify-center">
          <p-inputOtp formControlName="otp"></p-inputOtp>
        </div>
      </form>
      <button pButton class="btn btn-primary mt-2" type="button" (click)="verifyOtp()">Verify OTP</button>
    </div>

    <div *ngIf="otpVerified" class="reset-password-container">
      <form [formGroup]="resetPasswordForm">
        <p-floatLabel class="w-100">
          <input pInputText type="password" formControlName="newPassword" placeholder="New Password" class="form-control" />
          <label for="newPassword">New Password</label>
        </p-floatLabel>

        <p-floatLabel class="w-100 mt-2">
          <input pInputText type="password" formControlName="confirmPassword" placeholder="Confirm Password" class="form-control" />
          <label for="confirmPassword">Confirm Password</label>
        </p-floatLabel>

        <button pButton class="btn btn-success mt-2" type="button" (click)="resetPassword()">Update Password</button>
      </form>
    </div>

    <div *ngIf="!otpVerified" class="submit-button-container">
      <button pButton class="btn btn-primary" type="submit">{{ otpSent ? 'Verify OTP' : 'Get OTP' }}</button>
    </div>
  </form>

  <div *ngIf="otpSent && resendTimeout > 0" class="resend-otp-container">
    <button pButton class="btn btn-secondary" (click)="sendOtp()" [disabled]="resendTimeout > 0">
      Resend OTP ({{ resendTimeout }}s)
    </button>
  </div>

  <div class="form-footer mt-3">
    <p>
      Remember your password?
      <button class="sign-up-btn" (click)="onBackToLogin()">Back to Login</button>
    </p>
  </div>
</div>
